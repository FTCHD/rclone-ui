var un=Object.create;var it=Object.defineProperty;var cn=Object.getOwnPropertyDescriptor;var dn=Object.getOwnPropertyNames;var fn=Object.getPrototypeOf,pn=Object.prototype.hasOwnProperty;var rt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var hn=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of dn(e))!pn.call(t,o)&&o!==n&&it(t,o,{get:()=>e[o],enumerable:!(i=cn(e,o))||i.enumerable});return t};var ot=(t,e,n)=>(n=t!=null?un(fn(t)):{},hn(e||!t||!t.__esModule?it(n,"default",{value:t,enumerable:!0}):n,t));var Et=rt(p=>{"use strict";var ce=Symbol.for("react.element"),gn=Symbol.for("react.portal"),bn=Symbol.for("react.fragment"),_n=Symbol.for("react.strict_mode"),vn=Symbol.for("react.profiler"),Sn=Symbol.for("react.provider"),kn=Symbol.for("react.context"),Rn=Symbol.for("react.forward_ref"),Ln=Symbol.for("react.suspense"),Tn=Symbol.for("react.memo"),xn=Symbol.for("react.lazy"),_t=Symbol.iterator;function Cn(t){return t===null||typeof t!="object"?null:(t=_t&&t[_t]||t["@@iterator"],typeof t=="function"?t:null)}var kt={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rt=Object.assign,Lt={};function ie(t,e,n){this.props=t,this.context=e,this.refs=Lt,this.updater=n||kt}ie.prototype.isReactComponent={};ie.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ie.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Tt(){}Tt.prototype=ie.prototype;function $e(t,e,n){this.props=t,this.context=e,this.refs=Lt,this.updater=n||kt}var Ne=$e.prototype=new Tt;Ne.constructor=$e;Rt(Ne,ie.prototype);Ne.isPureReactComponent=!0;var vt=Array.isArray,xt=Object.prototype.hasOwnProperty,Be={current:null},Ct={key:!0,ref:!0,__self:!0,__source:!0};function At(t,e,n){var i,o={},s=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)xt.call(e,i)&&!Ct.hasOwnProperty(i)&&(o[i]=e[i]);var c=arguments.length-2;if(c===1)o.children=n;else if(1<c){for(var d=Array(c),l=0;l<c;l++)d[l]=arguments[l+2];o.children=d}if(t&&t.defaultProps)for(i in c=t.defaultProps,c)o[i]===void 0&&(o[i]=c[i]);return{$$typeof:ce,type:t,key:s,ref:a,props:o,_owner:Be.current}}function An(t,e){return{$$typeof:ce,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ge(t){return typeof t=="object"&&t!==null&&t.$$typeof===ce}function On(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var St=/\/+/g;function ze(t,e){return typeof t=="object"&&t!==null&&t.key!=null?On(""+t.key):e.toString(36)}function ke(t,e,n,i,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ce:case gn:a=!0}}if(a)return a=t,o=o(a),t=i===""?"."+ze(a,0):i,vt(o)?(n="",t!=null&&(n=t.replace(St,"$&/")+"/"),ke(o,e,n,"",function(l){return l})):o!=null&&(Ge(o)&&(o=An(o,n+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(St,"$&/")+"/")+t)),e.push(o)),1;if(a=0,i=i===""?".":i+":",vt(t))for(var c=0;c<t.length;c++){s=t[c];var d=i+ze(s,c);a+=ke(s,e,n,d,o)}else if(d=Cn(t),typeof d=="function")for(t=d.call(t),c=0;!(s=t.next()).done;)s=s.value,d=i+ze(s,c++),a+=ke(s,e,n,d,o);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Se(t,e,n){if(t==null)return t;var i=[],o=0;return ke(t,i,"","",function(s){return e.call(n,s,o++)}),i}function En(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var A={current:null},Re={transition:null},Pn={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:Re,ReactCurrentOwner:Be};function Ot(){throw Error("act(...) is not supported in production builds of React.")}p.Children={map:Se,forEach:function(t,e,n){Se(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Se(t,function(){e++}),e},toArray:function(t){return Se(t,function(e){return e})||[]},only:function(t){if(!Ge(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};p.Component=ie;p.Fragment=bn;p.Profiler=vn;p.PureComponent=$e;p.StrictMode=_n;p.Suspense=Ln;p.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pn;p.act=Ot;p.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Rt({},t.props),o=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Be.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(d in e)xt.call(e,d)&&!Ct.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&c!==void 0?c[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){c=Array(d);for(var l=0;l<d;l++)c[l]=arguments[l+2];i.children=c}return{$$typeof:ce,type:t.type,key:o,ref:s,props:i,_owner:a}};p.createContext=function(t){return t={$$typeof:kn,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Sn,_context:t},t.Consumer=t};p.createElement=At;p.createFactory=function(t){var e=At.bind(null,t);return e.type=t,e};p.createRef=function(){return{current:null}};p.forwardRef=function(t){return{$$typeof:Rn,render:t}};p.isValidElement=Ge;p.lazy=function(t){return{$$typeof:xn,_payload:{_status:-1,_result:t},_init:En}};p.memo=function(t,e){return{$$typeof:Tn,type:t,compare:e===void 0?null:e}};p.startTransition=function(t){var e=Re.transition;Re.transition={};try{t()}finally{Re.transition=e}};p.unstable_act=Ot;p.useCallback=function(t,e){return A.current.useCallback(t,e)};p.useContext=function(t){return A.current.useContext(t)};p.useDebugValue=function(){};p.useDeferredValue=function(t){return A.current.useDeferredValue(t)};p.useEffect=function(t,e){return A.current.useEffect(t,e)};p.useId=function(){return A.current.useId()};p.useImperativeHandle=function(t,e,n){return A.current.useImperativeHandle(t,e,n)};p.useInsertionEffect=function(t,e){return A.current.useInsertionEffect(t,e)};p.useLayoutEffect=function(t,e){return A.current.useLayoutEffect(t,e)};p.useMemo=function(t,e){return A.current.useMemo(t,e)};p.useReducer=function(t,e,n){return A.current.useReducer(t,e,n)};p.useRef=function(t){return A.current.useRef(t)};p.useState=function(t){return A.current.useState(t)};p.useSyncExternalStore=function(t,e,n){return A.current.useSyncExternalStore(t,e,n)};p.useTransition=function(){return A.current.useTransition()};p.version="18.3.1"});var He=rt((Ri,Pt)=>{"use strict";Pt.exports=Et()});function S(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)}function j(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n}var Y,D,X,me,T="__TAURI_TO_IPC_KEY__";function Oe(t,e=!1){return window.__TAURI_INTERNALS__.transformCallback(t,e)}var U=class{constructor(){this.__TAURI_CHANNEL_MARKER__=!0,Y.set(this,()=>{}),D.set(this,0),X.set(this,[]),this.id=Oe(({message:e,id:n})=>{if(n==S(this,D,"f"))for(S(this,Y,"f").call(this,e),j(this,D,S(this,D,"f")+1,"f");S(this,D,"f")in S(this,X,"f");){let i=S(this,X,"f")[S(this,D,"f")];S(this,Y,"f").call(this,i),delete S(this,X,"f")[S(this,D,"f")],j(this,D,S(this,D,"f")+1,"f")}else S(this,X,"f")[n]=e})}set onmessage(e){j(this,Y,e,"f")}get onmessage(){return S(this,Y,"f")}[(Y=new WeakMap,D=new WeakMap,X=new WeakMap,T)](){return`__CHANNEL__:${this.id}`}toJSON(){return this[T]()}};async function r(t,e={},n){return window.__TAURI_INTERNALS__.invoke(t,e,n)}var F=class{get rid(){return S(this,me,"f")}constructor(e){me.set(this,void 0),j(this,me,e,"f")}async close(){return r("plugin:resources|close",{rid:this.rid})}};me=new WeakMap;var z=class{constructor(...e){this.type="Logical",e.length===1?"Logical"in e[0]?(this.width=e[0].Logical.width,this.height=e[0].Logical.height):(this.width=e[0].width,this.height=e[0].height):(this.width=e[0],this.height=e[1])}toPhysical(e){return new x(this.width*e,this.height*e)}[T](){return{width:this.width,height:this.height}}toJSON(){return this[T]()}},x=class{constructor(...e){this.type="Physical",e.length===1?"Physical"in e[0]?(this.width=e[0].Physical.width,this.height=e[0].Physical.height):(this.width=e[0].width,this.height=e[0].height):(this.width=e[0],this.height=e[1])}toLogical(e){return new z(this.width/e,this.height/e)}[T](){return{width:this.width,height:this.height}}toJSON(){return this[T]()}},P=class{constructor(e){this.size=e}toLogical(e){return this.size instanceof z?this.size:this.size.toLogical(e)}toPhysical(e){return this.size instanceof x?this.size:this.size.toPhysical(e)}[T](){return{[`${this.size.type}`]:{width:this.size.width,height:this.size.height}}}toJSON(){return this[T]()}},ae=class{constructor(...e){this.type="Logical",e.length===1?"Logical"in e[0]?(this.x=e[0].Logical.x,this.y=e[0].Logical.y):(this.x=e[0].x,this.y=e[0].y):(this.x=e[0],this.y=e[1])}toPhysical(e){return new w(this.x*e,this.y*e)}[T](){return{x:this.x,y:this.y}}toJSON(){return this[T]()}},w=class{constructor(...e){this.type="Physical",e.length===1?"Physical"in e[0]?(this.x=e[0].Physical.x,this.y=e[0].Physical.y):(this.x=e[0].x,this.y=e[0].y):(this.x=e[0],this.y=e[1])}toLogical(e){return new ae(this.x/e,this.y/e)}[T](){return{x:this.x,y:this.y}}toJSON(){return this[T]()}},L=class{constructor(e){this.position=e}toLogical(e){return this.position instanceof ae?this.position:this.position.toLogical(e)}toPhysical(e){return this.position instanceof w?this.position:this.position.toPhysical(e)}[T](){return{[`${this.position.type}`]:{x:this.position.x,y:this.position.y}}}toJSON(){return this[T]()}};var b;(function(t){t.WINDOW_RESIZED="tauri://resize",t.WINDOW_MOVED="tauri://move",t.WINDOW_CLOSE_REQUESTED="tauri://close-requested",t.WINDOW_DESTROYED="tauri://destroyed",t.WINDOW_FOCUS="tauri://focus",t.WINDOW_BLUR="tauri://blur",t.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",t.WINDOW_THEME_CHANGED="tauri://theme-changed",t.WINDOW_CREATED="tauri://window-created",t.WEBVIEW_CREATED="tauri://webview-created",t.DRAG_ENTER="tauri://drag-enter",t.DRAG_OVER="tauri://drag-over",t.DRAG_DROP="tauri://drag-drop",t.DRAG_LEAVE="tauri://drag-leave"})(b||(b={}));async function st(t,e){await r("plugin:event|unlisten",{event:t,eventId:e})}async function I(t,e,n){var i;let o=typeof n?.target=="string"?{kind:"AnyLabel",label:n.target}:(i=n?.target)!==null&&i!==void 0?i:{kind:"Any"};return r("plugin:event|listen",{event:t,target:o,handler:Oe(e)}).then(s=>async()=>st(t,s))}async function ee(t,e,n){return I(t,i=>{st(t,i.id),e(i)},n)}async function ye(t,e){await r("plugin:event|emit",{event:t,payload:e})}async function we(t,e,n){await r("plugin:event|emit_to",{target:typeof t=="string"?{kind:"AnyLabel",label:t}:t,event:e,payload:n})}var Ee=class t extends F{constructor(e){super(e)}static async new(e,n,i){return r("plugin:image|new",{rgba:C(e),width:n,height:i}).then(o=>new t(o))}static async fromBytes(e){return r("plugin:image|from_bytes",{bytes:C(e)}).then(n=>new t(n))}static async fromPath(e){return r("plugin:image|from_path",{path:e}).then(n=>new t(n))}async rgba(){return r("plugin:image|rgba",{rid:this.rid}).then(e=>new Uint8Array(e))}async size(){return r("plugin:image|size",{rid:this.rid})}};function C(t){return t==null?null:typeof t=="string"?t:t instanceof Ee?t.rid:t}var Me;(function(t){t[t.Critical=1]="Critical",t[t.Informational=2]="Informational"})(Me||(Me={}));var Fe=class{constructor(e){this._preventDefault=!1,this.event=e.event,this.id=e.id}preventDefault(){this._preventDefault=!0}isPreventDefault(){return this._preventDefault}},at;(function(t){t.None="none",t.Normal="normal",t.Indeterminate="indeterminate",t.Paused="paused",t.Error="error"})(at||(at={}));function te(){return new N(window.__TAURI_INTERNALS__.metadata.currentWindow.label,{skip:!0})}async function $(){return r("plugin:window|get_all_windows").then(t=>t.map(e=>new N(e,{skip:!0})))}var Pe=["tauri://created","tauri://error"],N=class{constructor(e,n={}){var i;this.label=e,this.listeners=Object.create(null),n?.skip||r("plugin:window|create",{options:{...n,parent:typeof n.parent=="string"?n.parent:(i=n.parent)===null||i===void 0?void 0:i.label,label:e}}).then(async()=>this.emit("tauri://created")).catch(async o=>this.emit("tauri://error",o))}static async getByLabel(e){var n;return(n=(await $()).find(i=>i.label===e))!==null&&n!==void 0?n:null}static getCurrent(){return te()}static async getAll(){return $()}static async getFocusedWindow(){for(let e of await $())if(await e.isFocused())return e;return null}async listen(e,n){return this._handleTauriEvent(e,n)?()=>{let i=this.listeners[e];i.splice(i.indexOf(n),1)}:I(e,n,{target:{kind:"Window",label:this.label}})}async once(e,n){return this._handleTauriEvent(e,n)?()=>{let i=this.listeners[e];i.splice(i.indexOf(n),1)}:ee(e,n,{target:{kind:"Window",label:this.label}})}async emit(e,n){if(Pe.includes(e)){for(let i of this.listeners[e]||[])i({event:e,id:-1,payload:n});return}return ye(e,n)}async emitTo(e,n,i){if(Pe.includes(n)){for(let o of this.listeners[n]||[])o({event:n,id:-1,payload:i});return}return we(e,n,i)}_handleTauriEvent(e,n){return Pe.includes(e)?(e in this.listeners?this.listeners[e].push(n):this.listeners[e]=[n],!0):!1}async scaleFactor(){return r("plugin:window|scale_factor",{label:this.label})}async innerPosition(){return r("plugin:window|inner_position",{label:this.label}).then(e=>new w(e))}async outerPosition(){return r("plugin:window|outer_position",{label:this.label}).then(e=>new w(e))}async innerSize(){return r("plugin:window|inner_size",{label:this.label}).then(e=>new x(e))}async outerSize(){return r("plugin:window|outer_size",{label:this.label}).then(e=>new x(e))}async isFullscreen(){return r("plugin:window|is_fullscreen",{label:this.label})}async isMinimized(){return r("plugin:window|is_minimized",{label:this.label})}async isMaximized(){return r("plugin:window|is_maximized",{label:this.label})}async isFocused(){return r("plugin:window|is_focused",{label:this.label})}async isDecorated(){return r("plugin:window|is_decorated",{label:this.label})}async isResizable(){return r("plugin:window|is_resizable",{label:this.label})}async isMaximizable(){return r("plugin:window|is_maximizable",{label:this.label})}async isMinimizable(){return r("plugin:window|is_minimizable",{label:this.label})}async isClosable(){return r("plugin:window|is_closable",{label:this.label})}async isVisible(){return r("plugin:window|is_visible",{label:this.label})}async title(){return r("plugin:window|title",{label:this.label})}async theme(){return r("plugin:window|theme",{label:this.label})}async center(){return r("plugin:window|center",{label:this.label})}async requestUserAttention(e){let n=null;return e&&(e===Me.Critical?n={type:"Critical"}:n={type:"Informational"}),r("plugin:window|request_user_attention",{label:this.label,value:n})}async setResizable(e){return r("plugin:window|set_resizable",{label:this.label,value:e})}async setEnabled(e){return r("plugin:window|set_enabled",{label:this.label,value:e})}async isEnabled(){return r("plugin:window|is_enabled",{label:this.label})}async setMaximizable(e){return r("plugin:window|set_maximizable",{label:this.label,value:e})}async setMinimizable(e){return r("plugin:window|set_minimizable",{label:this.label,value:e})}async setClosable(e){return r("plugin:window|set_closable",{label:this.label,value:e})}async setTitle(e){return r("plugin:window|set_title",{label:this.label,value:e})}async maximize(){return r("plugin:window|maximize",{label:this.label})}async unmaximize(){return r("plugin:window|unmaximize",{label:this.label})}async toggleMaximize(){return r("plugin:window|toggle_maximize",{label:this.label})}async minimize(){return r("plugin:window|minimize",{label:this.label})}async unminimize(){return r("plugin:window|unminimize",{label:this.label})}async show(){return r("plugin:window|show",{label:this.label})}async hide(){return r("plugin:window|hide",{label:this.label})}async close(){return r("plugin:window|close",{label:this.label})}async destroy(){return r("plugin:window|destroy",{label:this.label})}async setDecorations(e){return r("plugin:window|set_decorations",{label:this.label,value:e})}async setShadow(e){return r("plugin:window|set_shadow",{label:this.label,value:e})}async setEffects(e){return r("plugin:window|set_effects",{label:this.label,value:e})}async clearEffects(){return r("plugin:window|set_effects",{label:this.label,value:null})}async setAlwaysOnTop(e){return r("plugin:window|set_always_on_top",{label:this.label,value:e})}async setAlwaysOnBottom(e){return r("plugin:window|set_always_on_bottom",{label:this.label,value:e})}async setContentProtected(e){return r("plugin:window|set_content_protected",{label:this.label,value:e})}async setSize(e){return r("plugin:window|set_size",{label:this.label,value:e instanceof P?e:new P(e)})}async setMinSize(e){return r("plugin:window|set_min_size",{label:this.label,value:e instanceof P?e:e?new P(e):null})}async setMaxSize(e){return r("plugin:window|set_max_size",{label:this.label,value:e instanceof P?e:e?new P(e):null})}async setSizeConstraints(e){function n(i){return i?{Logical:i}:null}return r("plugin:window|set_size_constraints",{label:this.label,value:{minWidth:n(e?.minWidth),minHeight:n(e?.minHeight),maxWidth:n(e?.maxWidth),maxHeight:n(e?.maxHeight)}})}async setPosition(e){return r("plugin:window|set_position",{label:this.label,value:e instanceof L?e:new L(e)})}async setFullscreen(e){return r("plugin:window|set_fullscreen",{label:this.label,value:e})}async setFocus(){return r("plugin:window|set_focus",{label:this.label})}async setIcon(e){return r("plugin:window|set_icon",{label:this.label,value:C(e)})}async setSkipTaskbar(e){return r("plugin:window|set_skip_taskbar",{label:this.label,value:e})}async setCursorGrab(e){return r("plugin:window|set_cursor_grab",{label:this.label,value:e})}async setCursorVisible(e){return r("plugin:window|set_cursor_visible",{label:this.label,value:e})}async setCursorIcon(e){return r("plugin:window|set_cursor_icon",{label:this.label,value:e})}async setBackgroundColor(e){return r("plugin:window|set_background_color",{color:e})}async setCursorPosition(e){return r("plugin:window|set_cursor_position",{label:this.label,value:e instanceof L?e:new L(e)})}async setIgnoreCursorEvents(e){return r("plugin:window|set_ignore_cursor_events",{label:this.label,value:e})}async startDragging(){return r("plugin:window|start_dragging",{label:this.label})}async startResizeDragging(e){return r("plugin:window|start_resize_dragging",{label:this.label,value:e})}async setBadgeCount(e){return r("plugin:window|set_badge_count",{label:this.label,value:e})}async setBadgeLabel(e){return r("plugin:window|set_badge_label",{label:this.label,value:e})}async setOverlayIcon(e){return r("plugin:window|set_overlay_icon",{label:this.label,value:e?C(e):void 0})}async setProgressBar(e){return r("plugin:window|set_progress_bar",{label:this.label,value:e})}async setVisibleOnAllWorkspaces(e){return r("plugin:window|set_visible_on_all_workspaces",{label:this.label,value:e})}async setTitleBarStyle(e){return r("plugin:window|set_title_bar_style",{label:this.label,value:e})}async setTheme(e){return r("plugin:window|set_theme",{label:this.label,value:e})}async onResized(e){return this.listen(b.WINDOW_RESIZED,n=>{n.payload=new x(n.payload),e(n)})}async onMoved(e){return this.listen(b.WINDOW_MOVED,n=>{n.payload=new w(n.payload),e(n)})}async onCloseRequested(e){return this.listen(b.WINDOW_CLOSE_REQUESTED,async n=>{let i=new Fe(n);await e(i),i.isPreventDefault()||await this.destroy()})}async onDragDropEvent(e){let n=await this.listen(b.DRAG_ENTER,a=>{e({...a,payload:{type:"enter",paths:a.payload.paths,position:new w(a.payload.position)}})}),i=await this.listen(b.DRAG_OVER,a=>{e({...a,payload:{type:"over",position:new w(a.payload.position)}})}),o=await this.listen(b.DRAG_DROP,a=>{e({...a,payload:{type:"drop",paths:a.payload.paths,position:new w(a.payload.position)}})}),s=await this.listen(b.DRAG_LEAVE,a=>{e({...a,payload:{type:"leave"}})});return()=>{n(),o(),i(),s()}}async onFocusChanged(e){let n=await this.listen(b.WINDOW_FOCUS,o=>{e({...o,payload:!0})}),i=await this.listen(b.WINDOW_BLUR,o=>{e({...o,payload:!1})});return()=>{n(),i()}}async onScaleChanged(e){return this.listen(b.WINDOW_SCALE_FACTOR_CHANGED,e)}async onThemeChanged(e){return this.listen(b.WINDOW_THEME_CHANGED,e)}},lt;(function(t){t.AppearanceBased="appearanceBased",t.Light="light",t.Dark="dark",t.MediumLight="mediumLight",t.UltraDark="ultraDark",t.Titlebar="titlebar",t.Selection="selection",t.Menu="menu",t.Popover="popover",t.Sidebar="sidebar",t.HeaderView="headerView",t.Sheet="sheet",t.WindowBackground="windowBackground",t.HudWindow="hudWindow",t.FullScreenUI="fullScreenUI",t.Tooltip="tooltip",t.ContentBackground="contentBackground",t.UnderWindowBackground="underWindowBackground",t.UnderPageBackground="underPageBackground",t.Mica="mica",t.Blur="blur",t.Acrylic="acrylic",t.Tabbed="tabbed",t.TabbedDark="tabbedDark",t.TabbedLight="tabbedLight"})(lt||(lt={}));var ut;(function(t){t.FollowsWindowActiveState="followsWindowActiveState",t.Active="active",t.Inactive="inactive"})(ut||(ut={}));function mn(t){return t===null?null:{name:t.name,scaleFactor:t.scaleFactor,position:new w(t.position),size:new x(t.size)}}async function ct(){return r("plugin:window|current_monitor").then(mn)}async function dt(t={}){return typeof t=="object"&&Object.freeze(t),await r("plugin:dialog|open",{options:t})}async function V(t,e){let n=typeof e=="string"?{title:e}:e;await r("plugin:dialog|message",{message:t.toString(),title:n?.title?.toString(),kind:n?.kind,okButtonLabel:n?.okLabel?.toString()})}async function ge(t,e){let n=typeof e=="string"?{title:e}:e;return await r("plugin:dialog|ask",{message:t.toString(),title:n?.title?.toString(),kind:n?.kind,yesButtonLabel:n?.okLabel?.toString(),noButtonLabel:n?.cancelLabel?.toString()})}async function ft(t,e){let n=typeof e=="string"?{title:e}:e;return await r("plugin:dialog|confirm",{message:t.toString(),title:n?.title?.toString(),kind:n?.kind,okButtonLabel:n?.okLabel?.toString(),cancelButtonLabel:n?.cancelLabel?.toString()})}var q;(function(t){t[t.Trace=1]="Trace",t[t.Debug=2]="Debug",t[t.Info=3]="Info",t[t.Warn=4]="Warn",t[t.Error=5]="Error"})(q||(q={}));function yn(t){if(t)if(t.startsWith("Error")){let n=t.split(`
`)[3]?.trim();if(!n)return;let i=/at\s+(?<functionName>.*?)\s+\((?<fileName>.*?):(?<lineNumber>\d+):(?<columnNumber>\d+)\)/,o=n.match(i);if(o){let{functionName:s,fileName:a,lineNumber:c,columnNumber:d}=o.groups;return`${s}@${a}:${c}:${d}`}else{let s=/at\s+(?<fileName>.*?):(?<lineNumber>\d+):(?<columnNumber>\d+)/,a=n.match(s);if(a){let{fileName:c,lineNumber:d,columnNumber:l}=a.groups;return`<anonymous>@${c}:${d}:${l}`}}}else return t.split(`
`).map(i=>i.split("@")).filter(([i,o])=>i.length>0&&o!=="[native code]")[2]?.filter(i=>i.length>0).join("@")}async function le(t,e,n){let i=yn(new Error().stack),{file:o,line:s,keyValues:a}=n??{};await r("plugin:log|log",{level:t,message:e,location:i,file:o,line:s,keyValues:a})}async function pt(t,e){await le(q.Error,t,e)}async function ht(t,e){await le(q.Warn,t,e)}async function mt(t,e){await le(q.Info,t,e)}async function yt(t,e){await le(q.Debug,t,e)}async function wt(t,e){await le(q.Trace,t,e)}async function be(t=0){await r("plugin:process|exit",{code:t})}var ue=class{constructor(){this.eventListeners=Object.create(null)}addListener(e,n){return this.on(e,n)}removeListener(e,n){return this.off(e,n)}on(e,n){return e in this.eventListeners?this.eventListeners[e].push(n):this.eventListeners[e]=[n],this}once(e,n){let i=o=>{this.removeListener(e,i),n(o)};return this.addListener(e,i)}off(e,n){return e in this.eventListeners&&(this.eventListeners[e]=this.eventListeners[e].filter(i=>i!==n)),this}removeAllListeners(e){return e?delete this.eventListeners[e]:this.eventListeners=Object.create(null),this}emit(e,n){if(e in this.eventListeners){let i=this.eventListeners[e];for(let o of i)o(n);return!0}return!1}listenerCount(e){return e in this.eventListeners?this.eventListeners[e].length:0}prependListener(e,n){return e in this.eventListeners?this.eventListeners[e].unshift(n):this.eventListeners[e]=[n],this}prependOnceListener(e,n){let i=o=>{this.removeListener(e,i),n(o)};return this.prependListener(e,i)}},Ie=class{constructor(e){this.pid=e}async write(e){await r("plugin:shell|stdin_write",{pid:this.pid,buffer:e})}async kill(){await r("plugin:shell|kill",{cmd:"killChild",pid:this.pid})}},ne=class t extends ue{constructor(e,n=[],i){super(),this.stdout=new ue,this.stderr=new ue,this.program=e,this.args=typeof n=="string"?[n]:n,this.options=i??{}}static create(e,n=[],i){return new t(e,n,i)}static sidecar(e,n=[],i){let o=new t(e,n,i);return o.options.sidecar=!0,o}async spawn(){let e=this.program,n=this.args,i=this.options;typeof n=="object"&&Object.freeze(n);let o=new U;return o.onmessage=s=>{switch(s.event){case"Error":this.emit("error",s.payload);break;case"Terminated":this.emit("close",s.payload);break;case"Stdout":this.stdout.emit("data",s.payload);break;case"Stderr":this.stderr.emit("data",s.payload);break}},await r("plugin:shell|spawn",{program:e,args:n,options:i,onEvent:o}).then(s=>new Ie(s))}async execute(){let e=this.program,n=this.args,i=this.options;return typeof n=="object"&&Object.freeze(n),await r("plugin:shell|execute",{program:e,args:n,options:i})}};var De="Request canceled";async function _e(t,e){let n=e?.signal;if(n?.aborted)throw new Error(De);let i=e?.maxRedirections,o=e?.connectTimeout,s=e?.proxy;e&&(delete e.maxRedirections,delete e.connectTimeout,delete e.proxy);let a=e?.headers?e.headers instanceof Headers?e.headers:new Headers(e.headers):new Headers,c=new Request(t,e),d=await c.arrayBuffer(),l=d.byteLength!==0?Array.from(new Uint8Array(d)):null;for(let[Z,se]of c.headers)a.get(Z)||a.set(Z,se);let y=(a instanceof Headers?Array.from(a.entries()):Array.isArray(a)?a:Object.entries(a)).map(([Z,se])=>[Z,typeof se=="string"?se:se.toString()]);if(n?.aborted)throw new Error(De);let k=await r("plugin:http|fetch",{clientConfig:{method:c.method,url:c.url,headers:y,data:l,maxRedirections:i,connectTimeout:o,proxy:s}}),R=()=>r("plugin:http|fetch_cancel",{rid:k});if(n?.aborted)throw R(),new Error(De);n?.addEventListener("abort",()=>void R());let{status:O,statusText:u,url:f,headers:m,rid:v}=await r("plugin:http|fetch_send",{rid:k}),g=await r("plugin:http|fetch_read_body",{rid:v}),J=new Response(g instanceof ArrayBuffer&&g.byteLength!==0?g:g instanceof Array&&g.length>0?new Uint8Array(g):null,{status:O,statusText:u});return Object.defineProperty(J,"url",{value:f}),Object.defineProperty(J,"headers",{value:new Headers(m)}),J}async function Ue(){let t=await _e("http://localhost:5572/config/listremotes",{method:"POST"}).then(e=>e.json());if(typeof t?.remotes>"u")throw new Error("Failed to fetch remotes");return t.remotes}async function gt(t){await _e(`http://localhost:5572/config/delete?name=${t}`,{method:"POST"})}async function bt({remotePath:t,mountPoint:e,mountOptions:n,vfsOptions:i}){let o=new URLSearchParams;o.set("fs",t),o.set("mountPoint",e),n&&Object.keys(n).length>0&&o.set("mountOpt",JSON.stringify(n)),i&&Object.keys(i).length>0&&o.set("vfsOpt",JSON.stringify(i));let s=await _e(`http://localhost:5572/mount/mount?${o.toString()}`,{method:"POST"}).then(a=>a.json());if("error"in s)throw new Error(s.error)}async function We(t,e=!1){let i=await ne.create("umount",[e?"-f":"",t]).execute();if(i.code!==0){if(i.stderr.toLowerCase().includes("busy")){if(await ge("This resource is busy, do you want to force unmount?",{title:"Could not unmount",kind:"warning"}))return await We(t,!0);throw new Error(i.stderr)}if(i.stderr.toLowerCase().includes("not currently mounted"))return;throw new Error(i.stderr)}}async function wn(t,e){return await je.load(t,e)}var ve=class{get store(){return this._store||(this._store=wn(this.path,this.options)),this._store}constructor(e,n){this.path=e,this.options=n}async init(){await this.store}async set(e,n){return(await this.store).set(e,n)}async get(e){return(await this.store).get(e)}async has(e){return(await this.store).has(e)}async delete(e){return(await this.store).delete(e)}async clear(){await(await this.store).clear()}async reset(){await(await this.store).reset()}async keys(){return(await this.store).keys()}async values(){return(await this.store).values()}async entries(){return(await this.store).entries()}async length(){return(await this.store).length()}async reload(){await(await this.store).reload()}async save(){await(await this.store).save()}async onKeyChange(e,n){return(await this.store).onKeyChange(e,n)}async onChange(e){return(await this.store).onChange(e)}async close(){this._store&&await(await this._store).close()}},je=class t extends F{constructor(e){super(e)}static async load(e,n){let i=await r("plugin:store|load",{path:e,...n});return new t(i)}static async get(e){return await r("plugin:store|get_store",{path:e}).then(n=>n?new t(n):null)}async set(e,n){await r("plugin:store|set",{rid:this.rid,key:e,value:n})}async get(e){let[n,i]=await r("plugin:store|get",{rid:this.rid,key:e});return i?n:void 0}async has(e){return await r("plugin:store|has",{rid:this.rid,key:e})}async delete(e){return await r("plugin:store|delete",{rid:this.rid,key:e})}async clear(){await r("plugin:store|clear",{rid:this.rid})}async reset(){await r("plugin:store|reset",{rid:this.rid})}async keys(){return await r("plugin:store|keys",{rid:this.rid})}async values(){return await r("plugin:store|values",{rid:this.rid})}async entries(){return await r("plugin:store|entries",{rid:this.rid})}async length(){return await r("plugin:store|length",{rid:this.rid})}async reload(){await r("plugin:store|reload",{rid:this.rid})}async save(){await r("plugin:store|save",{rid:this.rid})}async onKeyChange(e,n){return await I("store://change",i=>{i.payload.resourceId===this.rid&&i.payload.key===e&&n(i.payload.exists?i.payload.value:void 0)})}async onChange(e){return await I("store://change",n=>{n.payload.resourceId===this.rid&&e(n.payload.key,n.payload.exists?n.payload.value:void 0)})}};var Je=ot(He(),1);var Mn=(t,e)=>(n,i,o)=>{var s;if(typeof window>"u"&&!(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope))return console.warn("BroadcastChannel is not supported in this environment. The store will not be shared."),t(n,i,o);if(typeof BroadcastChannel>"u")return console.warn("BroadcastChannel is not supported in this browser. The store will not be shared."),t(n,i,o);let a=i()!==void 0,c=!1,d=(s=e?.name)!=null?s:t.toString(),l=0,h=[0],y=new BroadcastChannel(d),k=()=>{let f=i();e!=null&&e.partialize&&(f=e.partialize(f)),e!=null&&e.skipSerialization||(f=JSON.parse(JSON.stringify(f))),y.postMessage({action:"change",state:f})},R=(...f)=>{n(...f),!(e!=null&&e.unsync)&&k()};y.onmessage=f=>{if(f.data.action==="sync"){if(!c)return;k();let m=h[h.length-1]+1;h.push(m),e==null||e.onTabsChange==null||e.onTabsChange(h),y.postMessage({action:"add_new_tab",id:m});return}if(f.data.action==="add_new_tab"&&!c&&l===0){l=f.data.id;return}if(f.data.action==="change"&&(n(m=>e!=null&&e.merge?e.merge(m,f.data.state):f.data.state),a=!0),f.data.action==="close"){if(!c)return;let m=h.indexOf(f.data.id);m!==-1&&(h.splice(m,1),e==null||e.onTabsChange==null||e.onTabsChange(h))}f.data.action==="change_main"&&f.data.id===l&&(c=!0,h.splice(0,h.length,...f.data.tabs),e==null||e.onBecomeMain==null||e.onBecomeMain(l))};let O=()=>{var f;y.postMessage({action:"sync"}),setTimeout(()=>{a||(c=!0,a=!0,e==null||e.onBecomeMain==null||e.onBecomeMain(l))},(f=e?.mainTimeout)!=null?f:100)},u=()=>{if(y.postMessage({action:"close",id:l}),c){if(h.length===1){y.close();return}let f=h.filter(m=>m!==l);y.postMessage({action:"change_main",id:f[0],tabs:f});return}};return typeof window<"u"&&window.addEventListener("beforeunload",u),a||O(),o.setState=R,t(R,i,o)},Mt=Mn;var Ft=t=>{let e,n=new Set,i=(l,h)=>{let y=typeof l=="function"?l(e):l;if(!Object.is(y,e)){let k=e;e=h??(typeof y!="object"||y===null)?y:Object.assign({},e,y),n.forEach(R=>R(e,k))}},o=()=>e,c={setState:i,getState:o,getInitialState:()=>d,subscribe:l=>(n.add(l),()=>n.delete(l))},d=e=t(i,o,c);return c},It=t=>t?Ft(t):Ft;var Ve=ot(He(),1);var Fn=t=>t;function In(t,e=Fn){let n=Ve.default.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return Ve.default.useDebugValue(n),n}var Dt=t=>{let e=It(t),n=i=>In(e,i);return Object.assign(n,e),n},qe=t=>t?Dt(t):Dt;function Qe(t,e){let n;try{n=t()}catch{return}return{getItem:o=>{var s;let a=d=>d===null?null:JSON.parse(d,e?.reviver),c=(s=n.getItem(o))!=null?s:null;return c instanceof Promise?c.then(a):a(c)},setItem:(o,s)=>n.setItem(o,JSON.stringify(s,e?.replacer)),removeItem:o=>n.removeItem(o)}}var Ke=t=>e=>{try{let n=t(e);return n instanceof Promise?n:{then(i){return Ke(i)(n)},catch(i){return this}}}catch(n){return{then(i){return this},catch(i){return Ke(i)(n)}}}},Dn=(t,e)=>(n,i,o)=>{let s={storage:Qe(()=>localStorage),partialize:u=>u,version:0,merge:(u,f)=>({...f,...u}),...e},a=!1,c=new Set,d=new Set,l=s.storage;if(!l)return t((...u)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...u)},i,o);let h=()=>{let u=s.partialize({...i()});return l.setItem(s.name,{state:u,version:s.version})},y=o.setState;o.setState=(u,f)=>{y(u,f),h()};let k=t((...u)=>{n(...u),h()},i,o);o.getInitialState=()=>k;let R,O=()=>{var u,f;if(!l)return;a=!1,c.forEach(v=>{var g;return v((g=i())!=null?g:k)});let m=((f=s.onRehydrateStorage)==null?void 0:f.call(s,(u=i())!=null?u:k))||void 0;return Ke(l.getItem.bind(l))(s.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==s.version){if(s.migrate){let g=s.migrate(v.state,v.version);return g instanceof Promise?g.then(J=>[!0,J]):[!0,g]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var g;let[J,Z]=v;if(R=s.merge(Z,(g=i())!=null?g:k),n(R,!0),J)return h()}).then(()=>{m?.(R,void 0),R=i(),a=!0,d.forEach(v=>v(R))}).catch(v=>{m?.(void 0,v)})};return o.persist={setOptions:u=>{s={...s,...u},u.storage&&(l=u.storage)},clearStorage:()=>{l?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>O(),hasHydrated:()=>a,onHydrate:u=>(c.add(u),()=>{c.delete(u)}),onFinishHydration:u=>(d.add(u),()=>{d.delete(u)})},s.skipHydration||O(),R||k},Ut=Dn;var Wt=new ve("store.json"),Un=t=>({getItem:async e=>(console.log("getItem",{name:e}),await t.get(e)||null),setItem:async(e,n)=>{console.log("setItem",{name:e,value:n}),await t.set(e,n),await t.save()},removeItem:async e=>{console.log("removeItem",{name:e}),await t.delete(e),await t.save()}}),K=qe()(Mt(t=>({count:0,anotherCount:0,increment:()=>t(e=>({count:e.count+1})),rcloneLoaded:!1,mountedRemotes:{},serveList:[],setServeList:e=>t(n=>({serveList:[...n.serveList,e]})),removeServeList:e=>t(n=>({serveList:n.serveList.filter(i=>i.pid!==e)})),remotes:[],setRemotes:e=>t(n=>({remotes:e})),addRemote:e=>t(n=>({remotes:[...n.remotes,e]})),removeRemote:e=>t(n=>({remotes:n.remotes.filter(i=>i!==e)}))}),{name:"shared-store"})),Le=qe()(Ut(t=>({remoteConfigList:{},setRemoteConfig:(e,n)=>t(i=>({remoteConfigList:{...i.remoteConfigList,[e]:n}})),mergeRemoteConfig:(e,n)=>t(i=>({remoteConfigList:{...i.remoteConfigList,[e]:{...i.remoteConfigList[e],...n}}})),disabledActions:[]}),{name:"store",storage:Qe(()=>Un(Wt))}));Wt.onKeyChange("store",async t=>{await Le.persist.rehydrate()});var B=class t extends F{constructor(e,n){super(e),this.id=n}static async getById(e){return r("plugin:tray|get_by_id",{id:e}).then(n=>n?new t(n,e):null)}static async removeById(e){return r("plugin:tray|remove_by_id",{id:e})}static async new(e){e?.menu&&(e.menu=[e.menu.rid,e.menu.kind]),e?.icon&&(e.icon=C(e.icon));let n=new U;if(e?.action){let i=e.action;n.onmessage=o=>i(Wn(o)),delete e.action}return r("plugin:tray|new",{options:e??{},handler:n}).then(([i,o])=>new t(i,o))}async setIcon(e){let n=null;return e&&(n=C(e)),r("plugin:tray|set_icon",{rid:this.rid,icon:n})}async setMenu(e){return e&&(e=[e.rid,e.kind]),r("plugin:tray|set_menu",{rid:this.rid,menu:e})}async setTooltip(e){return r("plugin:tray|set_tooltip",{rid:this.rid,tooltip:e})}async setTitle(e){return r("plugin:tray|set_title",{rid:this.rid,title:e})}async setVisible(e){return r("plugin:tray|set_visible",{rid:this.rid,visible:e})}async setTempDirPath(e){return r("plugin:tray|set_temp_dir_path",{rid:this.rid,path:e})}async setIconAsTemplate(e){return r("plugin:tray|set_icon_as_template",{rid:this.rid,asTemplate:e})}async setMenuOnLeftClick(e){return r("plugin:tray|set_show_menu_on_left_click",{rid:this.rid,onLeft:e})}async setShowMenuOnLeftClick(e){return r("plugin:tray|set_show_menu_on_left_click",{rid:this.rid,onLeft:e})}};function Wn(t){let e=t;return e.position=new w(t.position),e.rect.position=new w(t.rect.position),e.rect.size=new x(t.rect.size),e}var Te;(function(t){t[t.TopLeft=0]="TopLeft",t[t.TopRight=1]="TopRight",t[t.BottomLeft=2]="BottomLeft",t[t.BottomRight=3]="BottomRight",t[t.TopCenter=4]="TopCenter",t[t.BottomCenter=5]="BottomCenter",t[t.LeftCenter=6]="LeftCenter",t[t.RightCenter=7]="RightCenter",t[t.Center=8]="Center",t[t.TrayLeft=9]="TrayLeft",t[t.TrayBottomLeft=10]="TrayBottomLeft",t[t.TrayRight=11]="TrayRight",t[t.TrayBottomRight=12]="TrayBottomRight",t[t.TrayCenter=13]="TrayCenter",t[t.TrayBottomCenter=14]="TrayBottomCenter"})(Te||(Te={}));async function jt(t){await r("plugin:positioner|move_window",{position:t})}async function zt(t){await r("plugin:positioner|set_tray_icon_state",{position:t.rect.position,size:t.rect.size})}var xe,Ce;function $t(t){var e;if("items"in t)t.items=(e=t.items)===null||e===void 0?void 0:e.map(n=>"rid"in n?n:$t(n));else if("action"in t&&t.action){let n=new U;return n.onmessage=t.action,delete t.action,{...t,handler:n}}return t}async function M(t,e){let n=new U;if(e&&typeof e=="object"&&("action"in e&&e.action&&(n.onmessage=e.action,delete e.action),"item"in e&&e.item&&typeof e.item=="object"&&"About"in e.item&&e.item.About&&typeof e.item.About=="object"&&"icon"in e.item.About&&e.item.About.icon&&(e.item.About.icon=C(e.item.About.icon)),"icon"in e&&e.icon&&(e.icon=C(e.icon)),"items"in e&&e.items)){let i=function(o){var s;return"rid"in o?[o.rid,o.kind]:("item"in o&&typeof o.item=="object"&&(!((s=o.item.About)===null||s===void 0)&&s.icon)&&(o.item.About.icon=C(o.item.About.icon)),"icon"in o&&o.icon&&(o.icon=C(o.icon)),"items"in o&&o.items&&(o.items=o.items.map(i)),$t(o))};e.items=e.items.map(i)}return r("plugin:menu|new",{kind:t,options:e,handler:n})}var E=class extends F{get id(){return S(this,xe,"f")}get kind(){return S(this,Ce,"f")}constructor(e,n,i){super(e),xe.set(this,void 0),Ce.set(this,void 0),j(this,xe,n,"f"),j(this,Ce,i,"f")}};xe=new WeakMap,Ce=new WeakMap;var _=class t extends E{constructor(e,n){super(e,n,"MenuItem")}static async new(e){return M("MenuItem",e).then(([n,i])=>new t(n,i))}async text(){return r("plugin:menu|text",{rid:this.rid,kind:this.kind})}async setText(e){return r("plugin:menu|set_text",{rid:this.rid,kind:this.kind,text:e})}async isEnabled(){return r("plugin:menu|is_enabled",{rid:this.rid,kind:this.kind})}async setEnabled(e){return r("plugin:menu|set_enabled",{rid:this.rid,kind:this.kind,enabled:e})}async setAccelerator(e){return r("plugin:menu|set_accelerator",{rid:this.rid,kind:this.kind,accelerator:e})}};var de=class t extends E{constructor(e,n){super(e,n,"Check")}static async new(e){return M("Check",e).then(([n,i])=>new t(n,i))}async text(){return r("plugin:menu|text",{rid:this.rid,kind:this.kind})}async setText(e){return r("plugin:menu|set_text",{rid:this.rid,kind:this.kind,text:e})}async isEnabled(){return r("plugin:menu|is_enabled",{rid:this.rid,kind:this.kind})}async setEnabled(e){return r("plugin:menu|set_enabled",{rid:this.rid,kind:this.kind,enabled:e})}async setAccelerator(e){return r("plugin:menu|set_accelerator",{rid:this.rid,kind:this.kind,accelerator:e})}async isChecked(){return r("plugin:menu|is_checked",{rid:this.rid})}async setChecked(e){return r("plugin:menu|set_checked",{rid:this.rid,checked:e})}};var Ze;(function(t){t.Add="Add",t.Advanced="Advanced",t.Bluetooth="Bluetooth",t.Bookmarks="Bookmarks",t.Caution="Caution",t.ColorPanel="ColorPanel",t.ColumnView="ColumnView",t.Computer="Computer",t.EnterFullScreen="EnterFullScreen",t.Everyone="Everyone",t.ExitFullScreen="ExitFullScreen",t.FlowView="FlowView",t.Folder="Folder",t.FolderBurnable="FolderBurnable",t.FolderSmart="FolderSmart",t.FollowLinkFreestanding="FollowLinkFreestanding",t.FontPanel="FontPanel",t.GoLeft="GoLeft",t.GoRight="GoRight",t.Home="Home",t.IChatTheater="IChatTheater",t.IconView="IconView",t.Info="Info",t.InvalidDataFreestanding="InvalidDataFreestanding",t.LeftFacingTriangle="LeftFacingTriangle",t.ListView="ListView",t.LockLocked="LockLocked",t.LockUnlocked="LockUnlocked",t.MenuMixedState="MenuMixedState",t.MenuOnState="MenuOnState",t.MobileMe="MobileMe",t.MultipleDocuments="MultipleDocuments",t.Network="Network",t.Path="Path",t.PreferencesGeneral="PreferencesGeneral",t.QuickLook="QuickLook",t.RefreshFreestanding="RefreshFreestanding",t.Refresh="Refresh",t.Remove="Remove",t.RevealFreestanding="RevealFreestanding",t.RightFacingTriangle="RightFacingTriangle",t.Share="Share",t.Slideshow="Slideshow",t.SmartBadge="SmartBadge",t.StatusAvailable="StatusAvailable",t.StatusNone="StatusNone",t.StatusPartiallyAvailable="StatusPartiallyAvailable",t.StatusUnavailable="StatusUnavailable",t.StopProgressFreestanding="StopProgressFreestanding",t.StopProgress="StopProgress",t.TrashEmpty="TrashEmpty",t.TrashFull="TrashFull",t.User="User",t.UserAccounts="UserAccounts",t.UserGroup="UserGroup",t.UserGuest="UserGuest"})(Ze||(Ze={}));var fe=class t extends E{constructor(e,n){super(e,n,"Icon")}static async new(e){return M("Icon",e).then(([n,i])=>new t(n,i))}async text(){return r("plugin:menu|text",{rid:this.rid,kind:this.kind})}async setText(e){return r("plugin:menu|set_text",{rid:this.rid,kind:this.kind,text:e})}async isEnabled(){return r("plugin:menu|is_enabled",{rid:this.rid,kind:this.kind})}async setEnabled(e){return r("plugin:menu|set_enabled",{rid:this.rid,kind:this.kind,enabled:e})}async setAccelerator(e){return r("plugin:menu|set_accelerator",{rid:this.rid,kind:this.kind,accelerator:e})}async setIcon(e){return r("plugin:menu|set_icon",{rid:this.rid,icon:C(e)})}};var G=class t extends E{constructor(e,n){super(e,n,"Predefined")}static async new(e){return M("Predefined",e).then(([n,i])=>new t(n,i))}async text(){return r("plugin:menu|text",{rid:this.rid,kind:this.kind})}async setText(e){return r("plugin:menu|set_text",{rid:this.rid,kind:this.kind,text:e})}};function H([t,e,n]){switch(n){case"Submenu":return new re(t,e);case"Predefined":return new G(t,e);case"Check":return new de(t,e);case"Icon":return new fe(t,e);case"MenuItem":default:return new _(t,e)}}var re=class t extends E{constructor(e,n){super(e,n,"Submenu")}static async new(e){return M("Submenu",e).then(([n,i])=>new t(n,i))}async text(){return r("plugin:menu|text",{rid:this.rid,kind:this.kind})}async setText(e){return r("plugin:menu|set_text",{rid:this.rid,kind:this.kind,text:e})}async isEnabled(){return r("plugin:menu|is_enabled",{rid:this.rid,kind:this.kind})}async setEnabled(e){return r("plugin:menu|set_enabled",{rid:this.rid,kind:this.kind,enabled:e})}async append(e){return r("plugin:menu|append",{rid:this.rid,kind:this.kind,items:(Array.isArray(e)?e:[e]).map(n=>"rid"in n?[n.rid,n.kind]:n)})}async prepend(e){return r("plugin:menu|prepend",{rid:this.rid,kind:this.kind,items:(Array.isArray(e)?e:[e]).map(n=>"rid"in n?[n.rid,n.kind]:n)})}async insert(e,n){return r("plugin:menu|insert",{rid:this.rid,kind:this.kind,items:(Array.isArray(e)?e:[e]).map(i=>"rid"in i?[i.rid,i.kind]:i),position:n})}async remove(e){return r("plugin:menu|remove",{rid:this.rid,kind:this.kind,item:[e.rid,e.kind]})}async removeAt(e){return r("plugin:menu|remove_at",{rid:this.rid,kind:this.kind,position:e}).then(H)}async items(){return r("plugin:menu|items",{rid:this.rid,kind:this.kind}).then(e=>e.map(H))}async get(e){return r("plugin:menu|get",{rid:this.rid,kind:this.kind,id:e}).then(n=>n?H(n):null)}async popup(e,n){var i;return r("plugin:menu|popup",{rid:this.rid,kind:this.kind,window:(i=n?.label)!==null&&i!==void 0?i:null,at:e instanceof L?e:e?new L(e):null})}async setAsWindowsMenuForNSApp(){return r("plugin:menu|set_as_windows_menu_for_nsapp",{rid:this.rid})}async setAsHelpMenuForNSApp(){return r("plugin:menu|set_as_help_menu_for_nsapp",{rid:this.rid})}};var pe=class t extends E{constructor(e,n){super(e,n,"Menu")}static async new(e){return M("Menu",e).then(([n,i])=>new t(n,i))}static async default(){return r("plugin:menu|create_default").then(([e,n])=>new t(e,n))}async append(e){return r("plugin:menu|append",{rid:this.rid,kind:this.kind,items:(Array.isArray(e)?e:[e]).map(n=>"rid"in n?[n.rid,n.kind]:n)})}async prepend(e){return r("plugin:menu|prepend",{rid:this.rid,kind:this.kind,items:(Array.isArray(e)?e:[e]).map(n=>"rid"in n?[n.rid,n.kind]:n)})}async insert(e,n){return r("plugin:menu|insert",{rid:this.rid,kind:this.kind,items:(Array.isArray(e)?e:[e]).map(i=>"rid"in i?[i.rid,i.kind]:i),position:n})}async remove(e){return r("plugin:menu|remove",{rid:this.rid,kind:this.kind,item:[e.rid,e.kind]})}async removeAt(e){return r("plugin:menu|remove_at",{rid:this.rid,kind:this.kind,position:e}).then(H)}async items(){return r("plugin:menu|items",{rid:this.rid,kind:this.kind}).then(e=>e.map(H))}async get(e){return r("plugin:menu|get",{rid:this.rid,kind:this.kind,id:e}).then(n=>n?H(n):null)}async popup(e,n){var i;return r("plugin:menu|popup",{rid:this.rid,kind:this.kind,window:(i=n?.label)!==null&&i!==void 0?i:null,at:e instanceof L?e:e?new L(e):null})}async setAsAppMenu(){return r("plugin:menu|set_as_app_menu",{rid:this.rid}).then(e=>e?new t(e[0],e[1]):null)}async setAsWindowMenu(e){var n;return r("plugin:menu|set_as_window_menu",{rid:this.rid,window:(n=e?.label)!==null&&n!==void 0?n:null}).then(i=>i?new t(i[0],i[1]):null)}};var Nt;(function(t){t.Year="year",t.Month="month",t.TwoWeeks="twoWeeks",t.Week="week",t.Day="day",t.Hour="hour",t.Minute="minute",t.Second="second"})(Nt||(Nt={}));var Bt;(function(t){t[t.None=0]="None",t[t.Min=1]="Min",t[t.Low=2]="Low",t[t.Default=3]="Default",t[t.High=4]="High"})(Bt||(Bt={}));var Gt;(function(t){t[t.Secret=-1]="Secret",t[t.Private=0]="Private",t[t.Public=1]="Public"})(Gt||(Gt={}));async function Ht(){return window.Notification.permission!=="default"?await Promise.resolve(window.Notification.permission==="granted"):await r("plugin:notification|is_permission_granted")}async function Jt(){return await window.Notification.requestPermission()}function Vt(t){typeof t=="string"?new window.Notification(t):new window.Notification(t.title,t)}async function qt(t){return r("plugin:opener|reveal_item_in_dir",{path:t})}var Ye;(function(t){t[t.Audio=1]="Audio",t[t.Cache=2]="Cache",t[t.Config=3]="Config",t[t.Data=4]="Data",t[t.LocalData=5]="LocalData",t[t.Document=6]="Document",t[t.Download=7]="Download",t[t.Picture=8]="Picture",t[t.Public=9]="Public",t[t.Video=10]="Video",t[t.Resource=11]="Resource",t[t.Temp=12]="Temp",t[t.AppConfig=13]="AppConfig",t[t.AppData=14]="AppData",t[t.AppLocalData=15]="AppLocalData",t[t.AppCache=16]="AppCache",t[t.AppLog=17]="AppLog",t[t.Desktop=18]="Desktop",t[t.Executable=19]="Executable",t[t.Font=20]="Font",t[t.Home=21]="Home",t[t.Runtime=22]="Runtime",t[t.Template=23]="Template"})(Ye||(Ye={}));var Kt;(function(t){t[t.Start=0]="Start",t[t.Current=1]="Current",t[t.End=2]="End"})(Kt||(Kt={}));async function Qt(t,e){if(t instanceof URL&&t.protocol!=="file:")throw new TypeError("Must be a file URL.");return await r("plugin:fs|read_dir",{path:t instanceof URL?t.toString():t,options:e})}async function Zt(t){try{return(await Qt(t)).length===0}catch(e){return console.error("Error checking directory:",e),!1}}function et(){return new oe(te(),window.__TAURI_INTERNALS__.metadata.currentWebview.label,{skip:!0})}async function Yt(){return r("plugin:webview|get_all_webviews").then(t=>t.map(e=>new oe(new N(e.windowLabel,{skip:!0}),e.label,{skip:!0})))}var Xe=["tauri://created","tauri://error"],oe=class{constructor(e,n,i){this.window=e,this.label=n,this.listeners=Object.create(null),i?.skip||r("plugin:webview|create_webview",{windowLabel:e.label,label:n,options:i}).then(async()=>this.emit("tauri://created")).catch(async o=>this.emit("tauri://error",o))}static async getByLabel(e){var n;return(n=(await Yt()).find(i=>i.label===e))!==null&&n!==void 0?n:null}static getCurrent(){return et()}static async getAll(){return Yt()}async listen(e,n){return this._handleTauriEvent(e,n)?()=>{let i=this.listeners[e];i.splice(i.indexOf(n),1)}:I(e,n,{target:{kind:"Webview",label:this.label}})}async once(e,n){return this._handleTauriEvent(e,n)?()=>{let i=this.listeners[e];i.splice(i.indexOf(n),1)}:ee(e,n,{target:{kind:"Webview",label:this.label}})}async emit(e,n){if(Xe.includes(e)){for(let i of this.listeners[e]||[])i({event:e,id:-1,payload:n});return}return ye(e,n)}async emitTo(e,n,i){if(Xe.includes(n)){for(let o of this.listeners[n]||[])o({event:n,id:-1,payload:i});return}return we(e,n,i)}_handleTauriEvent(e,n){return Xe.includes(e)?(e in this.listeners?this.listeners[e].push(n):this.listeners[e]=[n],!0):!1}async position(){return r("plugin:webview|webview_position",{label:this.label}).then(e=>new w(e))}async size(){return r("plugin:webview|webview_size",{label:this.label}).then(e=>new x(e))}async close(){return r("plugin:webview|close",{label:this.label})}async setSize(e){return r("plugin:webview|set_webview_size",{label:this.label,value:e instanceof P?e:new P(e)})}async setPosition(e){return r("plugin:webview|set_webview_position",{label:this.label,value:e instanceof L?e:new L(e)})}async setFocus(){return r("plugin:webview|set_webview_focus",{label:this.label})}async hide(){return r("plugin:webview|webview_hide",{label:this.label})}async show(){return r("plugin:webview|webview_show",{label:this.label})}async setZoom(e){return r("plugin:webview|set_webview_zoom",{label:this.label,value:e})}async reparent(e){return r("plugin:webview|reparent",{label:this.label,window:typeof e=="string"?e:e.label})}async clearAllBrowsingData(){return r("plugin:webview|clear_all_browsing_data")}async setBackgroundColor(e){return r("plugin:webview|set_webview_background_color",{color:e})}async onDragDropEvent(e){let n=await this.listen(b.DRAG_ENTER,a=>{e({...a,payload:{type:"enter",paths:a.payload.paths,position:new w(a.payload.position)}})}),i=await this.listen(b.DRAG_OVER,a=>{e({...a,payload:{type:"over",position:new w(a.payload.position)}})}),o=await this.listen(b.DRAG_DROP,a=>{e({...a,payload:{type:"drop",paths:a.payload.paths,position:new w(a.payload.position)}})}),s=await this.listen(b.DRAG_LEAVE,a=>{e({...a,payload:{type:"leave"}})});return()=>{n(),o(),i(),s()}}};function jn(){let t=et();return new W(t.label,{skip:!0})}async function Xt(){return r("plugin:window|get_all_windows").then(t=>t.map(e=>new W(e,{skip:!0})))}var W=class t{constructor(e,n={}){var i;this.label=e,this.listeners=Object.create(null),n?.skip||r("plugin:webview|create_webview_window",{options:{...n,parent:typeof n.parent=="string"?n.parent:(i=n.parent)===null||i===void 0?void 0:i.label,label:e}}).then(async()=>this.emit("tauri://created")).catch(async o=>this.emit("tauri://error",o))}static async getByLabel(e){var n;let i=(n=(await Xt()).find(o=>o.label===e))!==null&&n!==void 0?n:null;return i?new t(i.label,{skip:!0}):null}static getCurrent(){return jn()}static async getAll(){return Xt()}async listen(e,n){return this._handleTauriEvent(e,n)?()=>{let i=this.listeners[e];i.splice(i.indexOf(n),1)}:I(e,n,{target:{kind:"WebviewWindow",label:this.label}})}async once(e,n){return this._handleTauriEvent(e,n)?()=>{let i=this.listeners[e];i.splice(i.indexOf(n),1)}:ee(e,n,{target:{kind:"WebviewWindow",label:this.label}})}async setBackgroundColor(e){return r("plugin:window|set_background_color",{color:e}).then(()=>r("plugin:webview|set_webview_background_color",{color:e}))}};zn(W,[N,oe]);function zn(t,e){(Array.isArray(e)?e:[e]).forEach(n=>{Object.getOwnPropertyNames(n.prototype).forEach(i=>{var o;typeof t.prototype=="object"&&t.prototype&&i in t.prototype||Object.defineProperty(t.prototype,i,(o=Object.getOwnPropertyDescriptor(n.prototype,i))!==null&&o!==void 0?o:Object.create(null))})})}async function en(){let t=await $().then(e=>e.find(n=>n.label==="main"));t&&(await t.setSize(new x(0,0)),await t.center(),await t.hide(),await t.setAlwaysOnTop(!0))}async function tn({name:t,url:e}){let n=new W(t,{height:0,width:0,visibleOnAllWorkspaces:!1,alwaysOnTop:!1,resizable:!0,visible:!0,focus:!0,title:t,decorations:!0,url:e});await new Promise(o=>setTimeout(o,1e3));let i=await ct().then(o=>o?.size);if(i)return await n.hide(),await n.setSize(i),await n.center(),await n.show(),n}async function Q({name:t,url:e,width:n=740,height:i=600}){let o=new W(t,{height:0,width:0,resizable:!1,visibleOnAllWorkspaces:!1,alwaysOnTop:!0,visible:!0,focus:!0,title:t,decorations:!0,url:e});return await new Promise(s=>setTimeout(s,1e3)),await o.hide(),await o.setSize(new z(n,i)),await o.center(),await o.show(),o}async function nn({name:t,url:e}){let n=new W(t,{height:0,width:0,resizable:!1,visibleOnAllWorkspaces:!0,alwaysOnTop:!0,visible:!0,focus:!0,title:t,decorations:!1,url:e});return await new Promise(i=>setTimeout(i,1500)),await n.hide(),await n.setSize(new z(400,600)),await n.show(),await jt(Te.TopRight),n}async function rn(t){let e=await $(),n=t?e.filter(i=>t.includes(i.label)):e;await Promise.all(n.map(i=>i.setClosable(!1)))}async function on(t){let e=await $(),n=t?e.filter(i=>t.includes(i.label)):e;await Promise.all(n.map(i=>i.setClosable(!0)))}async function nt(){let t=K.getState(),e=Le.getState(),n=t.remotes,i=[];for(let l of n){let h=e.remoteConfigList?.[l];if(h?.hideTray)continue;let y=[],k=t.mountedRemotes[l];if(k){let O=await _.new({id:`unmount-${l}`,text:"Unmount",action:async()=>{try{let m=t.mountedRemotes[l];if(!m){console.error(`No mount point found for remote ${l}`);return}await We(m),delete t.mountedRemotes[l],await V(`Successfully unmounted ${l} from ${m}`,{title:"Unmount Success"})}catch(m){console.error("Unmount operation failed:",m),await V(`Failed to unmount ${l}: ${m}`,{title:"Unmount Error"})}}});y.push(O);let u=t.mountedRemotes[l];console.log("Adding Open in Finder",u);let f=await _.new({id:`open-${l}`,text:"Open in Finder",action:async()=>{console.log("Open in Finder"),console.log(u),u&&(console.log("Opening in Finder"),await qt(u),console.log("Opened in Finder"))}});y.push(f)}if(!k&&!h?.disabledActions?.includes("mount")){let O=await _.new({id:`mount-${l}`,text:"Quick Mount",action:async()=>{await Ae().then(u=>u?.setVisible(!1)),await tt().then(u=>u?.setVisible(!0));try{await rn();let u=h.defaultMountPoint||null;if(u||(u=await dt({title:`Select a directory to mount "${l}"`,multiple:!1,directory:!0})),!u)return;if(console.log("selectedPath",u),!await Zt(u)){await V("The selected directory must be empty to mount a remote.",{title:"Mount Error",kind:"error"});return}await bt({remotePath:`${l}:${h.defaultRemotePath||""}`,mountPoint:u,mountOptions:h.mountDefaults,vfsOptions:h.vfsDefaults}),t.mountedRemotes[l]=u;let m=await Ht();m||(m=await Jt()==="granted"),m&&Vt({title:"Mounted",body:`Successfully mounted ${l} to ${u}`}),h.defaultMountPoint||await ge(`Mount successful! Do you want to set ${u} as the default mount point for ${l}? You can always change it later in Remote settings.`,{title:"Set Default?",okLabel:"Set",cancelLabel:"Cancel"})&&Le.setState(g=>({remoteConfigList:{...g.remoteConfigList,[l]:{...g.remoteConfigList[l],defaultMountPoint:u}}}))}catch(u){console.error("Mount operation failed:",u),await V(`Failed to mount ${l}: ${u}`,{title:"Mount Error"})}finally{await on(),await tt().then(u=>u?.setVisible(!1)),await Ae().then(u=>u?.setVisible(!0))}}});y.push(O)}if(!h?.disabledActions?.includes("browse")){let O=await _.new({id:`browse-${l}`,text:"Browse",action:async()=>{await tn({name:"Browse",url:"browse.html?url="+encodeURIComponent(`http://localhost:5572/[${l}:]/`)})}});y.push(O)}if(!h?.disabledActions?.includes("remove")){let O=await _.new({id:`remove-${l}`,text:"Remove",action:async()=>{await ft(`Are you sure you want to remove ${l}? This action cannot be reverted.`,{title:`Removing ${l}`,kind:"warning"})&&await gt(l)}});y.push(O)}let R=await re.new({items:y,text:l});i.push(R)}if(await G.new({item:"Separator"}).then(l=>{i.push(l)}),!e.disabledActions?.includes("mount")){let l=await _.new({id:"mount",text:"Mount",action:async()=>{await Q({name:"Mount",url:"/mount"})}});i.push(l)}if(!e.disabledActions?.includes("copy")){let l=await _.new({id:"copy",text:"Copy",action:async()=>{await Q({name:"Copy",url:"/copy"})}});i.push(l)}if(!e.disabledActions?.includes("sync")){let l=await _.new({id:"sync",text:"Sync",action:async()=>{await Q({name:"Sync",url:"/sync"})}});i.push(l)}let o=await _.new({id:"jobs",text:"Jobs",action:async()=>{await nn({name:"Jobs",url:"/jobs"})}});i.push(o),await G.new({item:"Separator"}).then(l=>{i.push(l)});let s=await _.new({id:"settings",text:"Settings",action:async()=>{await Q({name:"Settings",url:"/settings"})}});i.push(s);let a=await _.new({id:"quit",text:"Quit",action:async()=>{await be(0)}});i.push(a);let c=await _.new({id:"test",text:"Test",action:async()=>{await Q({name:"Test",url:"/test",width:400,height:400})}});i.push(c);let d=await _.new({id:"test2",text:"Test2",action:async()=>{await Q({name:"Test2",url:"/test",width:400,height:400})}});return i.push(d),await pe.new({id:"main-menu",items:i})}async function Ae(){return await B.getById("main-tray")}async function tt(){return await B.getById("loading-tray")}async function sn(){let t=await Ae();if(!t)return;let e=await nt();await t.setMenu(e)}async function $n(t){await zt(t),t.type==="Click"&&(console.log("Tray clicked:",t),await en())}async function an(){try{console.log("initTray");let t=await nt();console.log("built menu"),await B.getById("loading-tray").then(e=>e?.setVisible(!1)),console.log("set loading tray to false"),await B.new({id:"main-tray",icon:"icons/icon.png",tooltip:"S-Tray App",menu:t,menuOnLeftClick:!0,action:$n})}catch(t){console.error("Failed to create tray:",t)}}async function ln(){let t=await B.new({id:"loading-tray",icon:"icons/favicon/frame_00_delay-0.1s.png"}),e=1;setInterval(async()=>{e>17&&(e=1),await t?.setIcon(`icons/favicon/frame_${e<10?"0":""}${e}_delay-0.1s.png`),e=e+1},200)}function he(t,e){let n=console[t];console[t]=(i,...o)=>{n(i,...o),e(`${i} ${o?.map(s=>typeof s=="string"?s:JSON.stringify(s)).join(" ")}`)}}he("log",wt);he("debug",yt);he("info",mt);he("warn",ht);he("error",pt);console.log("main");console.error("main");async function Nn(){try{let i=await Ue();console.log("rclone already running",i),K.setState({rcloneLoaded:!0}),K.setState({remotes:i});return}catch(i){console.error("Failed to start rclone",i)}let t=ne.sidecar("binaries/rclone",["rcd","--rc-no-auth","--rc-serve"]);t.addListener("close",async i=>{console.log("close",i),(i.code===1||i.code===143)&&(await V("Rclone has crashed",{title:"Error",kind:"error"}),await be(0))}),t.addListener("error",i=>{console.log("error",i)});let e=await t.spawn();await new Promise(i=>setTimeout(i,100)),K.setState({rcloneLoaded:!0});let n=await Ue();console.log("remotes",n),K.setState({remotes:n})}te().listen("tauri://close-requested",async t=>{console.log("MAIN window close requested")});te().listen("rebuild-tray",async t=>{console.log("MAIN window rebuild-tray requested"),await sn()});ln().then(()=>Nn()).then(()=>an());
